<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>kakazu tetris</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>kakazu tetris</h1>
        </div>
        
        <div class="game-main">
            <div class="side-panel left-panel">
                <div class="next-box">
                    <h2>Next</h2>
                    <canvas id="nextCanvas" width="120" height="120"></canvas>
                </div>
                <div class="score-box">
                    <h2>Score</h2>
                    <div class="score-value" id="score">0</div>
                </div>
                <div class="game-rules">
                    <h3>Game Rules</h3>
                    <div class="rule-item">
                        <div class="rule-title win-rule">勝利条件</div>
                        <div class="rule-desc">全ブロックを緑線より下に</div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-title lose-rule">敗退条件</div>
                        <div class="rule-desc">ブロックが赤線を超えたら敗退</div>
                    </div>
                </div>
            </div>
            
            <div class="game-board">
                <canvas id="gameCanvas" width="450" height="600"></canvas>
                <div class="start-overlay" id="startOverlay">
                    <div class="start-content">
                        <h2>kakazu tetris</h2>
                        <p>美しいクリスタルブロックで<br>テトリスを楽しもう！</p>
                        <button onclick="startGame()">Start Game</button>
                    </div>
                </div>
                <div class="pause-overlay" id="pauseOverlay">
                    <div class="pause-text">PAUSE</div>
                </div>
                <div class="game-over-overlay" id="gameOverOverlay">
                    <div class="game-over-content">
                        <h2>Game Over</h2>
                        <p class="game-over-reason" id="gameOverReason"></p>
                        <p class="final-score">Score: <span id="finalScore">0</span></p>
                        <button onclick="restartGame()">Restart</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Touch Controls for Mobile -->
    <div class="touch-controls" id="touchControls">
            <div class="controls-row controls-row-top">
                <button class="control-btn btn-rotate" id="btnRotate">
                    <svg width="30" height="30" viewBox="0 0 30 30">
                        <path d="M15 5 L25 15 L15 25 L15 20 Q5 20 5 10 Q5 5 10 5" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                    <span class="btn-label">回転</span>
                </button>
                <button class="control-btn btn-pause" id="btnPause">
                    <svg width="30" height="30" viewBox="0 0 30 30">
                        <rect x="8" y="5" width="6" height="20" fill="currentColor"/>
                        <rect x="16" y="5" width="6" height="20" fill="currentColor"/>
                    </svg>
                    <span class="btn-label">ポーズ</span>
                </button>
            </div>
            <div class="controls-row controls-row-bottom">
                <button class="control-btn btn-left" id="btnLeft">
                    <svg width="30" height="30" viewBox="0 0 30 30">
                        <path d="M20 5 L10 15 L20 25" stroke="currentColor" stroke-width="3" fill="none"/>
                    </svg>
                    <span class="btn-label">左</span>
                </button>
                <button class="control-btn btn-down" id="btnDown">
                    <svg width="30" height="30" viewBox="0 0 30 30">
                        <path d="M5 10 L15 20 L25 10" stroke="currentColor" stroke-width="3" fill="none"/>
                    </svg>
                    <span class="btn-label">落下</span>
                </button>
                <button class="control-btn btn-right" id="btnRight">
                    <svg width="30" height="30" viewBox="0 0 30 30">
                        <path d="M10 5 L20 15 L10 25" stroke="currentColor" stroke-width="3" fill="none"/>
                    </svg>
                    <span class="btn-label">右</span>
                </button>
            </div>
        </div>
    </div>
    
    <script src="game.js"></script>
</body>
</html>